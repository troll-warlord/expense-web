import{d as X,u as Y,o as Z,a as F,c as o,b as e,e as P,F as w,r as _,t as l,n as c,f as ee,w as te,T as se,g as le,h as ae,i as oe,j as x,k as r,l as M,m as a,p as R,q,v as z,s as f,x as S}from"./index-BYtlHEAg.js";import{t as A,o as D,s as I,u as L,a as N}from"./vee-validate-zod-DMy80Ona.js";import{e as C}from"./index-DGW2OPUm.js";const re={class:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #07050f 0%, #130d3a 50%, #0e1a3a 100%)"}},ne={class:"absolute top-8 left-8 hidden xl:block rounded-2xl p-4 w-56 select-none pointer-events-none",style:{background:"rgba(255,255,255,0.06)","backdrop-filter":"blur(12px)",border:"1px solid rgba(255,255,255,0.08)",transform:"rotate(-3deg)"}},ie={class:"flex items-end gap-1 h-8"},de={class:"absolute top-10 right-8 hidden xl:block rounded-2xl p-4 w-52 select-none pointer-events-none",style:{background:"rgba(255,255,255,0.06)","backdrop-filter":"blur(12px)",border:"1px solid rgba(255,255,255,0.08)",transform:"rotate(2.5deg)"}},ce={class:"flex justify-between text-[10px] mb-1"},ue={style:{color:"rgba(255,255,255,0.5)"}},pe={class:"h-1 rounded-full",style:{background:"rgba(255,255,255,0.12)"}},be={class:"absolute bottom-10 left-8 hidden xl:block rounded-2xl p-4 w-60 select-none pointer-events-none",style:{background:"rgba(255,255,255,0.06)","backdrop-filter":"blur(12px)",border:"1px solid rgba(255,255,255,0.08)",transform:"rotate(2deg)"}},me={class:"flex items-center gap-2"},ge={class:"text-sm"},xe={class:"text-xs",style:{color:"rgba(255,255,255,0.5)"}},fe={class:"relative z-10 w-full max-w-md"},ve={class:"rounded-3xl p-8",style:{background:"rgba(255,255,255,0.07)","backdrop-filter":"blur(24px)",border:"1px solid rgba(255,255,255,0.12)","box-shadow":"0 25px 60px rgba(0,0,0,0.5)"}},ye={class:"text-center mb-7"},ke={class:"text-2xl font-extrabold text-white mb-1.5"},he={class:"text-sm",style:{color:"rgba(255,255,255,0.5)"}},we={class:"flex items-center gap-2 mb-7"},_e={key:0,class:"mt-1.5 text-xs text-red-400"},Se=["disabled"],Ce={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Te={class:"flex items-center justify-between rounded-xl px-4 py-3",style:{background:"rgba(99,102,241,0.15)",border:"1px solid rgba(99,102,241,0.3)"}},Ve={class:"text-sm text-white font-medium"},je={key:0,class:"mt-1.5 text-xs text-red-400"},Oe=["disabled"],Be={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Ee={class:"text-center text-sm",style:{color:"rgba(255,255,255,0.4)"}},Fe=["disabled"],ze=X({__name:"LoginPage",setup(Pe){const T=le(),$=ae(),U=Y(),p=oe(),u=x("email"),b=x(""),n=x(0);let i=null;function V(){n.value=60,i=setInterval(()=>{n.value--,n.value<=0&&i&&(clearInterval(i),i=null)},1e3)}Z(()=>{i&&clearInterval(i)});const G=A(D({email:I().min(1,"Email is required").email("Enter a valid email address")})),W=L({validationSchema:G}),{value:v,errorMessage:y}=N("email"),m=x(!1),j=W.handleSubmit(async d=>{m.value=!0;try{await F.requestOtp({email:d.email}),b.value=d.email,u.value="otp",V(),p.success(`OTP sent to ${d.email}`)}catch(t){p.error(C(t))}finally{m.value=!1}}),H=A(D({otp:I().length(6,"OTP must be exactly 6 digits").regex(/^\d{6}$/,"Digits only")})),O=L({validationSchema:H}),{value:k,errorMessage:h}=N("otp"),g=x(!1),B=O.handleSubmit(async d=>{g.value=!0;try{const{is_new_user:t}=await U.login(b.value,d.otp);t?T.push("/profile-setup"):T.push($.query.redirect||"/")}catch(t){p.error(C(t))}finally{g.value=!1}});async function J(){if(!(n.value>0))try{await F.requestOtp({email:b.value}),V(),p.success("OTP resent!")}catch(d){p.error(C(d))}}function K(){u.value="email",i&&(clearInterval(i),i=null),n.value=0,O.resetForm()}const Q=[38,56,42,70,50,64,48];return(d,t)=>(r(),o("div",re,[t[15]||(t[15]=e("div",{class:"absolute -top-40 -left-40 w-150 h-150 rounded-full pointer-events-none",style:{background:"radial-gradient(circle, rgba(124,58,237,0.18) 0%, transparent 65%)"}},null,-1)),t[16]||(t[16]=e("div",{class:"absolute -bottom-40 -right-40 w-150 h-150 rounded-full pointer-events-none",style:{background:"radial-gradient(circle, rgba(37,99,235,0.15) 0%, transparent 65%)"}},null,-1)),t[17]||(t[17]=e("div",{class:"absolute top-1/2 left-1/4 -translate-y-1/2 w-80 h-80 rounded-full pointer-events-none",style:{background:"radial-gradient(circle, rgba(139,92,246,0.08) 0%, transparent 70%)"}},null,-1)),t[18]||(t[18]=e("div",{class:"absolute inset-0 pointer-events-none",style:{"background-image":"radial-gradient(circle, rgba(255,255,255,0.06) 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),e("div",ne,[t[4]||(t[4]=P('<p class="text-[10px] font-semibold uppercase tracking-widest mb-2" style="color:rgba(255,255,255,0.4);">February 2026</p><div class="flex justify-between mb-3"><div><p class="text-[10px]" style="color:rgba(255,255,255,0.35);">Spent</p><p class="text-white font-bold text-lg leading-none">â‚¹78,400</p></div><div class="text-right"><p class="text-[10px]" style="color:rgba(255,255,255,0.35);">Saved</p><p class="font-bold text-lg leading-none" style="color:#34d399;">â‚¹44,600</p></div></div>',2)),e("div",ie,[(r(),o(w,null,_(Q,(s,E)=>e("div",{key:E,class:"flex-1 rounded-sm",style:c({height:s/70*32+"px",background:E===5?"rgba(167,139,250,0.85)":"rgba(255,255,255,0.18)"})},null,4)),64))])]),e("div",de,[t[5]||(t[5]=e("p",{class:"text-[10px] font-semibold uppercase tracking-widest mb-3",style:{color:"rgba(255,255,255,0.4)"}},"Budget Status",-1)),(r(),o(w,null,_([{name:"Groceries",pct:72,c:"#34d399"},{name:"Dining",pct:91,c:"#fbbf24"},{name:"Transport",pct:45,c:"#34d399"}],s=>e("div",{key:s.name,class:"mb-2.5"},[e("div",ce,[e("span",ue,l(s.name),1),e("span",{style:c({color:s.c})},l(s.pct)+"%",5)]),e("div",pe,[e("div",{class:"h-1 rounded-full",style:c({width:s.pct+"%",background:s.c})},null,4)])])),64))]),e("div",be,[t[6]||(t[6]=e("p",{class:"text-[10px] font-semibold uppercase tracking-widest mb-3",style:{color:"rgba(255,255,255,0.4)"}},"Recent",-1)),(r(),o(w,null,_([{icon:"ðŸ›’",name:"Grocery Store",amt:"âˆ’â‚¹2,400",c:"#f87171"},{icon:"ðŸ’¼",name:"Salary Credit",amt:"+â‚¹85,000",c:"#34d399"},{icon:"â˜•",name:"Cafe Latte",amt:"âˆ’â‚¹320",c:"#f87171"}],s=>e("div",{key:s.name,class:"flex items-center justify-between mb-2.5 last:mb-0"},[e("div",me,[e("span",ge,l(s.icon),1),e("span",xe,l(s.name),1)]),e("span",{class:"text-xs font-semibold",style:c({color:s.c})},l(s.amt),5)])),64))]),t[19]||(t[19]=P('<div class="absolute bottom-12 right-8 hidden xl:block rounded-2xl p-4 w-44 select-none pointer-events-none" style="background:rgba(255,255,255,0.06);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,0.08);transform:rotate(-2deg);"><p class="text-[10px] font-semibold uppercase tracking-widest mb-2" style="color:rgba(255,255,255,0.4);">Savings Rate</p><p class="text-4xl font-black" style="color:#34d399;">36%</p><p class="text-[10px] mt-1" style="color:rgba(255,255,255,0.35);">â†‘ 4pts vs last month</p><div class="mt-3 h-1.5 rounded-full" style="background:rgba(255,255,255,0.12);"><div class="h-1.5 rounded-full w-[36%]" style="background:linear-gradient(90deg, #34d399, #6ee7b7);"></div></div></div>',1)),e("div",fe,[t[13]||(t[13]=e("div",{class:"flex items-center justify-center gap-3 mb-8"},[e("div",{class:"h-11 w-11 rounded-xl flex items-center justify-center text-2xl leading-none select-none",style:{background:"rgba(255,255,255,0.12)","backdrop-filter":"blur(8px)",border:"1px solid rgba(255,255,255,0.15)"}},"âš¡"),e("span",{class:"text-white font-bold text-xl tracking-tight"},"Expense Tracker")],-1)),e("div",ve,[e("div",ye,[e("h1",ke,l(u.value==="email"?"Welcome back":"Check your inbox"),1),e("p",he,l(u.value==="email"?"Sign in with your email to continue.":`Code sent to ${b.value}`),1)]),e("div",we,[t[7]||(t[7]=e("div",{class:"flex-1 h-0.5 rounded-full",style:{background:"rgba(167,139,250,0.8)"}},null,-1)),e("div",{class:"flex-1 h-0.5 rounded-full transition-all duration-500",style:c(u.value==="otp"?"background: rgba(167,139,250,0.8)":"background: rgba(255,255,255,0.15)")},null,4)]),ee(se,{name:"slide-up",mode:"out-in"},{default:te(()=>[u.value==="email"?(r(),o("form",{key:"email",class:"space-y-4",onSubmit:t[1]||(t[1]=M((...s)=>a(j)&&a(j)(...s),["prevent"]))},[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-xs font-semibold mb-2 uppercase tracking-wide",style:{color:"rgba(255,255,255,0.5)"}}," Email Address ",-1)),R(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>q(v)?v.value=s:null),type:"email",inputmode:"email",placeholder:"you@example.com",autocomplete:"email",class:"w-full h-11 rounded-xl border px-4 text-sm focus:outline-none transition-all text-white",style:c(a(y)?"background: rgba(239,68,68,0.1); border-color: rgba(239,68,68,0.5)":"background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.15)")},null,4),[[z,a(v)]]),a(y)?(r(),o("p",_e,l(a(y)),1)):f("",!0)]),e("button",{type:"submit",class:"w-full h-12 rounded-xl font-semibold text-sm transition-all active:scale-[0.98] disabled:opacity-60 flex items-center justify-center gap-2 text-white",style:{background:"linear-gradient(135deg, #7c3aed 0%, #4f46e5 100%)","box-shadow":"0 4px 20px rgba(124,58,237,0.4)"},disabled:m.value},[m.value?(r(),o("svg",Ce,[...t[9]||(t[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):f("",!0),S(" "+l(m.value?"Sending...":"Send OTP"),1)],8,Se)],32)):(r(),o("form",{key:"otp",class:"space-y-4",onSubmit:t[3]||(t[3]=M((...s)=>a(B)&&a(B)(...s),["prevent"]))},[e("div",Te,[e("p",Ve,l(b.value),1),e("button",{type:"button",class:"text-xs font-semibold",style:{color:"#a78bfa"},onClick:K}," Change ")]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-xs font-semibold mb-2 uppercase tracking-wide",style:{color:"rgba(255,255,255,0.5)"}}," One-Time Password ",-1)),R(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>q(k)?k.value=s:null),type:"text",inputmode:"numeric",placeholder:"â€¢ â€¢ â€¢ â€¢ â€¢ â€¢",maxlength:"6",autocomplete:"one-time-code",class:"w-full h-12 rounded-xl border px-4 focus:outline-none transition-all text-white text-center font-bold text-xl placeholder:tracking-normal placeholder:text-base",style:c([{"letter-spacing":"0.4em"},a(h)?"background: rgba(239,68,68,0.1); border-color: rgba(239,68,68,0.5)":"background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.15)"])},null,4),[[z,a(k)]]),a(h)?(r(),o("p",je,l(a(h)),1)):f("",!0)]),e("button",{type:"submit",class:"w-full h-12 rounded-xl font-semibold text-sm transition-all active:scale-[0.98] disabled:opacity-60 flex items-center justify-center gap-2 text-white",style:{background:"linear-gradient(135deg, #7c3aed 0%, #4f46e5 100%)","box-shadow":"0 4px 20px rgba(124,58,237,0.4)"},disabled:g.value},[g.value?(r(),o("svg",Be,[...t[11]||(t[11]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):f("",!0),S(" "+l(g.value?"Verifying...":"Verify and Sign In"),1)],8,Oe),e("p",Ee,[t[12]||(t[12]=S(" Didn't receive it? ",-1)),e("button",{type:"button",class:"font-semibold ml-1 transition-colors",style:c(n.value>0?"color:rgba(255,255,255,0.25); cursor:not-allowed":"color:#a78bfa"),disabled:n.value>0,onClick:J},l(n.value>0?`Resend in ${n.value}s`:"Resend OTP"),13,Fe)])],32))]),_:1})]),t[14]||(t[14]=e("p",{class:"text-center text-xs mt-5",style:{color:"rgba(255,255,255,0.2)"}}," Secure Â Â·Â  Private Â Â·Â  Always in sync ",-1))])]))}});export{ze as default};
