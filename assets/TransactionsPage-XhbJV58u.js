import{G as we,j as h,d as re,k as l,c as u,b as e,F as S,r as $,y as ae,t as p,z as pe,A as ve,C as q,w as m,f as s,m as o,q as G,l as be,x as _,_ as P,i as fe,E as oe,B as ke,s as Z,p as _e,H as Ce,I as Te,T as de,J as Ve}from"./index-BYtlHEAg.js";import{_ as Se,u as Me,b as De,a as $e}from"./AppShell.vue_vue_type_script_setup_true_lang-CLwHBfE0.js";import{t as Q,_ as ue}from"./AppEmptyState.vue_vue_type_script_setup_true_lang-BrLKb1Df.js";import{t as Ie,e as le,a as ce,f as ne}from"./index-DGW2OPUm.js";import{_ as A}from"./AppSkeleton.vue_vue_type_script_setup_true_lang-Dnr6u1Oa.js";import{_ as me,a as ee}from"./AppIconButton.vue_vue_type_script_setup_true_lang-DQlAomsS.js";import{_ as ge,a as W}from"./AppModal.vue_vue_type_script_setup_true_lang-q5JyDnhF.js";import{_ as O}from"./AppInput.vue_vue_type_script_setup_true_lang-Bw9j5WbD.js";import{t as Fe,o as Be,s as te,c as Ee,u as Ae,a as J}from"./vee-validate-zod-DMy80Ona.js";const ye=we("transactions",()=>{const x=h([]),c=h(0),d=h(1),C=h(20),k=h(1),g=h(!1),v=h({});async function w(y){g.value=!0,y!==void 0&&(v.value={...y},d.value=1);try{const{data:f}=await Q.list({...v.value,page:d.value,page_size:C.value});f.success&&(x.value=f.data.map(T=>({...T,amount:Number(T.amount)})),c.value=f.meta.total,k.value=f.meta.total_pages)}finally{g.value=!1}}async function j(y){d.value=y,await w()}async function M(y){const{data:f}=await Q.create(y);if(!f.success)throw new Error(f.message);return await w(),f.data}async function I(y,f){const{data:T}=await Q.update(y,f);if(!T.success)throw new Error(T.message);const E=x.value.findIndex(Y=>Y.id===y);return E!==-1&&(x.value[E]=T.data),T.data}async function F(y){const{data:f}=await Q.remove(y);if(!f.success)throw new Error(f.message);x.value=x.value.filter(T=>T.id!==y),c.value=Math.max(0,c.value-1)}function B(){x.value=[],c.value=0,d.value=1,k.value=1,v.value={}}return{items:x,total:c,page:d,pageSize:C,pages:k,loading:g,filters:v,fetchTransactions:w,goToPage:j,createTransaction:M,updateTransaction:I,deleteTransaction:F,reset:B}}),Pe={class:"flex items-center justify-center gap-1","aria-label":"Pagination"},je=["disabled"],Ue={key:0,class:"px-2 py-1.5 text-sm text-surface-400"},Oe=["onClick"],ze=["disabled"],Le=re({__name:"AppPagination",props:{currentPage:{},totalPages:{}},emits:["change"],setup(x,{emit:c}){const d=x,C=c;function k(){const g=d.totalPages;if(g<=7)return Array.from({length:g},(w,j)=>j+1);const v=d.currentPage;return v<=4?[1,2,3,4,5,"...",g]:v>=g-3?[1,"...",g-4,g-3,g-2,g-1,g]:[1,"...",v-1,v,v+1,"...",g]}return(g,v)=>(l(),u("nav",Pe,[e("button",{class:"px-2 py-1.5 rounded-lg text-sm text-surface-600 hover:bg-surface-100 disabled:opacity-40 disabled:pointer-events-none",disabled:x.currentPage===1,onClick:v[0]||(v[0]=w=>C("change",x.currentPage-1))},[...v[2]||(v[2]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19l-7-7 7-7"})],-1)])],8,je),(l(!0),u(S,null,$(k(),(w,j)=>(l(),u(S,{key:j},[w==="..."?(l(),u("span",Ue,"…")):(l(),u("button",{key:1,class:ae(["min-w-8 px-2 py-1.5 rounded-lg text-sm font-medium transition-colors",w===x.currentPage?"bg-primary-600 text-white":"text-surface-600 hover:bg-surface-100"]),onClick:M=>C("change",w)},p(w),11,Oe))],64))),128)),e("button",{class:"px-2 py-1.5 rounded-lg text-sm text-surface-600 hover:bg-surface-100 disabled:opacity-40 disabled:pointer-events-none",disabled:x.currentPage===x.totalPages,onClick:v[1]||(v[1]=w=>C("change",x.currentPage+1))},[...v[3]||(v[3]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1)])],8,ze)]))}}),qe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ye={label:"Income"},Ne=["value"],Re={label:"Expense"},He=["value"],Ke=["value"],Ge=re({__name:"TransactionFormModal",props:{editTarget:{}},emits:["close","saved"],setup(x,{emit:c}){const d=x,C=c,k=pe(),g=ye(),v=fe(),w=oe(()=>!!d.editTarget),j=oe(()=>w.value?"Edit Transaction":"Add Transaction"),M=Fe(Be({amount:Ee.number({invalid_type_error:"Amount is required"}).positive("Amount must be greater than 0").refine(b=>Math.round(b*100)/100===b,"Amount can have at most 2 decimal places"),date:te().min(1,"Date is required"),category_id:te().min(1,"Category is required"),payment_method_id:te().min(1,"Payment method is required"),description:te().max(1e3,"Description cannot exceed 1000 characters").optional()})),{handleSubmit:I,resetForm:F,isSubmitting:B,setValues:y}=Ae({validationSchema:M,initialValues:{amount:void 0,date:Ie(),category_id:"",payment_method_id:"",description:""}}),{value:f,errorMessage:T}=J("amount"),{value:E,errorMessage:Y}=J("date"),{value:N,errorMessage:R}=J("category_id"),{value:U,errorMessage:H}=J("payment_method_id"),{value:z,errorMessage:X}=J("description");ve(()=>d.editTarget,b=>{b?y({amount:b.amount,date:b.date.split("T")[0],category_id:b.category_id,payment_method_id:b.payment_method_id,description:b.description||""}):F()},{immediate:!0});const K=I(async b=>{try{w.value&&d.editTarget?(await g.updateTransaction(d.editTarget.id,b),v.success("Transaction updated")):(await g.createTransaction(b),v.success("Transaction added")),C("saved"),C("close")}catch(i){v.error(le(i))}});return(b,i)=>(l(),q(ge,{title:j.value,onClose:i[7]||(i[7]=n=>C("close"))},{footer:m(()=>[s(P,{variant:"ghost",onClick:i[6]||(i[6]=n=>C("close"))},{default:m(()=>[...i[10]||(i[10]=[_("Cancel",-1)])]),_:1}),s(P,{loading:o(B),onClick:o(K)},{default:m(()=>[_(p(w.value?"Save Changes":"Add Transaction"),1)]),_:1},8,["loading","onClick"])]),default:m(()=>[e("form",{class:"space-y-4",onSubmit:i[5]||(i[5]=be((...n)=>o(K)&&o(K)(...n),["prevent"]))},[e("div",qe,[s(O,{modelValue:o(f),"onUpdate:modelValue":i[0]||(i[0]=n=>G(f)?f.value=n:null),modelModifiers:{number:!0},label:"Amount",type:"number",step:"0.01",min:"0",placeholder:"0.00",required:"",error:o(T)},null,8,["modelValue","error"]),s(O,{modelValue:o(E),"onUpdate:modelValue":i[1]||(i[1]=n=>G(E)?E.value=n:null),label:"Date",type:"date",required:"",error:o(Y)},null,8,["modelValue","error"])]),s(W,{modelValue:o(N),"onUpdate:modelValue":i[2]||(i[2]=n=>G(N)?N.value=n:null),label:"Category",required:"",error:o(R)},{default:m(()=>[i[8]||(i[8]=e("option",{value:"",disabled:""},"Select category",-1)),e("optgroup",Ye,[(l(!0),u(S,null,$(o(k).incomeCategories,n=>(l(),u("option",{key:n.id,value:n.id},p(n.icon?n.icon+" ":"")+p(n.name),9,Ne))),128))]),e("optgroup",Re,[(l(!0),u(S,null,$(o(k).expenseCategories,n=>(l(),u("option",{key:n.id,value:n.id},p(n.icon?n.icon+" ":"")+p(n.name),9,He))),128))])]),_:1},8,["modelValue","error"]),s(W,{modelValue:o(U),"onUpdate:modelValue":i[3]||(i[3]=n=>G(U)?U.value=n:null),label:"Payment Method",required:"",error:o(H)},{default:m(()=>[i[9]||(i[9]=e("option",{value:"",disabled:""},"Select payment method",-1)),(l(!0),u(S,null,$(o(k).paymentMethods,n=>(l(),u("option",{key:n.id,value:n.id},p(n.name),9,Ke))),128))]),_:1},8,["modelValue","error"]),s(O,{modelValue:o(z),"onUpdate:modelValue":i[4]||(i[4]=n=>G(z)?z.value=n:null),label:"Description",placeholder:"Optional note",error:o(X)},null,8,["modelValue","error"])],32)]),_:1},8,["title"]))}}),Je={class:"space-y-5"},Qe={class:"flex flex-wrap items-center justify-between gap-3"},We={class:"text-xs text-surface-400 mt-0.5"},Xe={class:"flex items-center gap-2"},Ze={key:0,class:"inline-flex items-center justify-center h-4 w-4 rounded-full bg-primary-600 text-white text-[10px] font-bold"},et={class:"bg-white rounded-xl border border-surface-100 p-4 shadow-sm"},tt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},at=["value"],ot=["value"],st={class:"flex gap-2 mt-3"},nt={class:"bg-white rounded-xl border border-surface-100 shadow-sm overflow-hidden"},lt={key:0},rt={class:"hidden sm:block animate-pulse"},it={class:"sm:hidden animate-pulse divide-y divide-surface-50"},dt={class:"flex-1 space-y-2"},ut={key:1},ct={class:"hidden sm:block overflow-x-auto"},mt={class:"w-full text-sm"},pt={class:"divide-y divide-surface-50"},vt={class:"px-5 py-3 text-surface-500 whitespace-nowrap"},ft={class:"px-5 py-3 text-surface-900 max-w-50 truncate"},gt={class:"px-5 py-3"},yt={class:"px-5 py-3 text-surface-500"},ht={class:"px-5 py-3"},xt={class:"flex items-center justify-end gap-1"},wt={class:"sm:hidden divide-y divide-surface-50"},bt={class:"flex-1 min-w-0 space-y-0.5"},kt={class:"text-sm font-medium text-surface-900 truncate"},_t={class:"text-xs text-surface-400"},Ct={class:"flex flex-col items-end gap-2 shrink-0"},Tt={class:"flex gap-1"},Vt={class:"px-6 py-5 space-y-5"},St={class:"flex flex-wrap gap-2"},Mt=["onClick"],Dt={class:"grid grid-cols-2 gap-3"},$t={class:"flex justify-end gap-2 px-6 py-4 border-t border-surface-100"},zt=re({__name:"TransactionsPage",setup(x){const c=ye(),d=pe(),{confirm:C}=Ve(),k=fe(),g=h(!1),w=Me(De).greaterOrEqual("sm"),j=oe(()=>w.value||g.value),M=h(""),I=h(""),F=h(""),B=h(""),y=h(""),f=h("");function T(){const r={};return M.value&&(r.q=M.value),I.value&&(r.type=I.value),F.value&&(r.category_id=F.value),B.value&&(r.payment_method_id=B.value),y.value&&(r.date_from=y.value),f.value&&(r.date_to=f.value),r}async function E(){await c.fetchTransactions(T())}function Y(){M.value="",I.value="",F.value="",B.value="",y.value="",f.value="",c.fetchTransactions({})}const N=$e(()=>E(),400);ve(M,()=>N());const R=oe(()=>{let r=0;return M.value&&r++,I.value&&r++,F.value&&r++,B.value&&r++,y.value&&r++,f.value&&r++,r}),U=h(!1),H=h(null);function z(){H.value=null,U.value=!0}function X(r){H.value=r,U.value=!0}function K(){U.value=!1}async function b(r){if(await C({title:"Delete Transaction",message:`Are you sure you want to delete this transaction of ${ne(r.amount)}? This cannot be undone.`,confirmLabel:"Delete",danger:!0}))try{await c.deleteTransaction(r.id),k.success("Transaction deleted")}catch(a){k.error(le(a))}}const i=h(!1),n=h(!1),V=h(""),D=h("");function ie(){V.value="",D.value="",n.value=!0}function he(r){const t=new Date;r==="this_month"?(V.value=new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10),D.value=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().slice(0,10)):r==="last_month"?(V.value=new Date(t.getFullYear(),t.getMonth()-1,1).toISOString().slice(0,10),D.value=new Date(t.getFullYear(),t.getMonth(),0).toISOString().slice(0,10)):r==="last_3_months"?(V.value=new Date(t.getFullYear(),t.getMonth()-2,1).toISOString().slice(0,10),D.value=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().slice(0,10)):(V.value="",D.value="")}async function xe(){i.value=!0;try{const r={};V.value&&(r.date_from=V.value),D.value&&(r.date_to=D.value);const t=await Q.export(r),a=new Blob([t.data],{type:"text/csv;charset=utf-8;"}),L=URL.createObjectURL(a),se=document.createElement("a");se.href=L,se.download=`transactions-${new Date().toISOString().split("T")[0]}.csv`,se.click(),URL.revokeObjectURL(L),k.success("Export downloaded"),n.value=!1}catch(r){k.error(le(r))}finally{i.value=!1}}return ke(()=>c.fetchTransactions({})),(r,t)=>(l(),q(Se,null,{default:m(()=>[e("div",Je,[e("div",Qe,[e("div",null,[t[12]||(t[12]=e("h2",{class:"text-base font-semibold text-surface-900"},"All Transactions",-1)),e("p",We,p(o(c).total)+" total records",1)]),e("div",Xe,[e("button",{class:"sm:hidden flex items-center gap-1.5 px-3 py-2 rounded-lg border border-surface-200 text-sm font-medium text-surface-600 bg-white hover:bg-surface-50 transition-colors",onClick:ie},[...t[13]||(t[13]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),_(" Export ",-1)])]),e("button",{class:"sm:hidden flex items-center gap-1.5 px-3 py-2 rounded-lg border border-surface-200 text-sm font-medium text-surface-600 bg-white hover:bg-surface-50 transition-colors",onClick:t[0]||(t[0]=a=>g.value=!g.value)},[t[14]||(t[14]=e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L13 13.414V19a1 1 0 01-.553.894l-4 2A1 1 0 017 21v-7.586L3.293 6.707A1 1 0 013 6V4z"})],-1)),t[15]||(t[15]=_(" Filters ",-1)),R.value>0?(l(),u("span",Ze,p(R.value),1)):Z("",!0)]),s(P,{variant:"outline",class:"hidden sm:flex",onClick:ie},{default:m(()=>[...t[16]||(t[16]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),_(" Export CSV ",-1)])]),_:1}),s(P,{class:"hidden sm:flex",onClick:z},{default:m(()=>[...t[17]||(t[17]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1),_(" Add Transaction ",-1)])]),_:1})])]),s(de,{name:"sheet"},{default:m(()=>[_e(e("div",et,[e("div",tt,[s(O,{modelValue:M.value,"onUpdate:modelValue":t[1]||(t[1]=a=>M.value=a),placeholder:"Search description…",class:"sm:col-span-2 lg:col-span-3",onKeydown:Te(E,["enter"])},null,8,["modelValue"]),s(W,{modelValue:I.value,"onUpdate:modelValue":t[2]||(t[2]=a=>I.value=a)},{default:m(()=>[...t[18]||(t[18]=[e("option",{value:""},"All Types",-1),e("option",{value:"income"},"Income",-1),e("option",{value:"expense"},"Expense",-1)])]),_:1},8,["modelValue"]),s(W,{modelValue:F.value,"onUpdate:modelValue":t[3]||(t[3]=a=>F.value=a)},{default:m(()=>[t[19]||(t[19]=e("option",{value:""},"All Categories",-1)),(l(!0),u(S,null,$(o(d).categories,a=>(l(),u("option",{key:a.id,value:a.id},p(a.icon?a.icon+" ":"")+p(a.name),9,at))),128))]),_:1},8,["modelValue"]),s(W,{modelValue:B.value,"onUpdate:modelValue":t[4]||(t[4]=a=>B.value=a)},{default:m(()=>[t[20]||(t[20]=e("option",{value:""},"All Methods",-1)),(l(!0),u(S,null,$(o(d).paymentMethods,a=>(l(),u("option",{key:a.id,value:a.id},p(a.name),9,ot))),128))]),_:1},8,["modelValue"]),s(O,{modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=a=>y.value=a),type:"date",placeholder:"From date"},null,8,["modelValue"]),s(O,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=a=>f.value=a),type:"date",placeholder:"To date"},null,8,["modelValue"])]),e("div",st,[s(P,{variant:"primary",size:"sm",onClick:E},{default:m(()=>[...t[21]||(t[21]=[_("Apply Filters",-1)])]),_:1}),s(P,{variant:"ghost",size:"sm",onClick:Y},{default:m(()=>[...t[22]||(t[22]=[_("Reset",-1)])]),_:1})])],512),[[Ce,j.value]])]),_:1}),s(de,{name:"page-fade",mode:"out-in"},{default:m(()=>[(l(),u("div",{key:`${o(c).page}-${o(c).loading}`,class:"space-y-4"},[e("div",nt,[o(c).loading?(l(),u("div",lt,[e("div",rt,[(l(),u(S,null,$(8,a=>e("div",{key:a,class:"flex items-center gap-4 px-5 py-3.5 border-b border-surface-50 last:border-0"},[s(A,{h:"h-3",w:"w-20"}),s(A,{h:"h-3",w:"w-44"}),s(A,{h:"h-5",w:"w-24",pill:""}),s(A,{h:"h-3",w:"w-24"}),s(A,{h:"h-3",w:"w-16",class:"ml-auto"}),s(A,{h:"h-3",w:"w-14"})])),64))]),e("div",it,[(l(),u(S,null,$(6,a=>e("div",{key:a,class:"px-4 py-3.5 flex items-start gap-3"},[e("div",dt,[s(A,{h:"h-3.5",w:"w-40"}),s(A,{h:"h-3",w:"w-28"}),s(A,{h:"h-5",w:"w-20",pill:""})]),s(A,{h:"h-4",w:"w-16"})])),64))])])):o(c).items.length===0?(l(),u("div",ut,[R.value===0?(l(),q(ue,{key:0,title:"No transactions yet",description:"Start tracking your income and expenses by adding your first transaction."},{default:m(()=>[s(P,{onClick:z},{default:m(()=>[...t[23]||(t[23]=[_("Add Transaction",-1)])]),_:1})]),_:1})):(l(),q(ue,{key:1,title:"No results",description:"No transactions match your current filters."},{default:m(()=>[s(P,{variant:"ghost",size:"sm",onClick:Y},{default:m(()=>[...t[24]||(t[24]=[_("Clear Filters",-1)])]),_:1})]),_:1}))])):(l(),u(S,{key:2},[e("div",ct,[e("table",mt,[t[25]||(t[25]=e("thead",{class:"border-b border-surface-100"},[e("tr",{class:"text-xs font-medium text-surface-500 uppercase tracking-wide"},[e("th",{class:"px-5 py-3 text-left"},"Date"),e("th",{class:"px-5 py-3 text-left"},"Description"),e("th",{class:"px-5 py-3 text-left"},"Category"),e("th",{class:"px-5 py-3 text-left"},"Method"),e("th",{class:"px-5 py-3 text-right"},"Amount"),e("th",{class:"px-5 py-3 text-right"},"Actions")])],-1)),e("tbody",pt,[(l(!0),u(S,null,$(o(c).items,a=>(l(),u("tr",{key:a.id,class:"hover:bg-surface-50 transition-colors"},[e("td",vt,p(o(ce)(a.date)),1),e("td",ft,p(a.description||"—"),1),e("td",gt,[s(me,{variant:o(d).getCategoryById(a.category_id)?.type==="income"?"income":"expense"},{default:m(()=>[_(p(o(d).getCategoryById(a.category_id)?.name),1)]),_:2},1032,["variant"])]),e("td",yt,p(o(d).getPaymentMethodById(a.payment_method_id)?.name),1),e("td",{class:ae(["px-5 py-3 text-right font-semibold whitespace-nowrap",o(d).getCategoryById(a.category_id)?.type==="income"?"text-income":"text-expense"])},p(o(d).getCategoryById(a.category_id)?.type==="income"?"+":"-")+p(o(ne)(a.amount)),3),e("td",ht,[e("div",xt,[s(ee,{icon:"edit",title:"Edit",onClick:L=>X(a)},null,8,["onClick"]),s(ee,{icon:"delete",title:"Delete",onClick:L=>b(a)},null,8,["onClick"])])])]))),128))])])]),e("ul",wt,[(l(!0),u(S,null,$(o(c).items,a=>(l(),u("li",{key:a.id,class:"px-4 py-3 flex items-start gap-3"},[e("div",bt,[e("p",kt,p(a.description||o(d).getCategoryById(a.category_id)?.name),1),e("p",_t,p(o(ce)(a.date))+" · "+p(o(d).getPaymentMethodById(a.payment_method_id)?.name),1),s(me,{variant:o(d).getCategoryById(a.category_id)?.type==="income"?"income":"expense",size:"sm"},{default:m(()=>[_(p(o(d).getCategoryById(a.category_id)?.name),1)]),_:2},1032,["variant"])]),e("div",Ct,[e("span",{class:ae(["text-sm font-semibold",o(d).getCategoryById(a.category_id)?.type==="income"?"text-income":"text-expense"])},p(o(d).getCategoryById(a.category_id)?.type==="income"?"+":"-")+p(o(ne)(a.amount)),3),e("div",Tt,[s(ee,{icon:"edit",size:"sm",onClick:L=>X(a)},null,8,["onClick"]),s(ee,{icon:"delete",size:"sm",onClick:L=>b(a)},null,8,["onClick"])])])]))),128))])],64))]),o(c).pages>1?(l(),q(Le,{key:0,"current-page":o(c).page,"total-pages":o(c).pages,onChange:o(c).goToPage},null,8,["current-page","total-pages","onChange"])):Z("",!0)]))]),_:1})]),e("button",{class:"fixed bottom-20 right-4 z-30 lg:hidden h-14 w-14 rounded-full bg-primary-600 text-white shadow-lg shadow-primary-300/50 flex items-center justify-center active:scale-95 transition-transform hover:bg-primary-700","aria-label":"Add Transaction",onClick:z},[...t[26]||(t[26]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)])]),n.value?(l(),q(ge,{key:0,title:"Export Transactions",size:"sm",onClose:t[10]||(t[10]=a=>n.value=!1)},{default:m(()=>[e("div",Vt,[e("div",null,[t[27]||(t[27]=e("p",{class:"text-xs font-medium text-surface-500 uppercase tracking-wide mb-2"},"Quick Range",-1)),e("div",St,[(l(),u(S,null,$([{key:"this_month",label:"This Month"},{key:"last_month",label:"Last Month"},{key:"last_3_months",label:"Last 3 Months"},{key:"all",label:"All Time"}],a=>e("button",{key:a.key,class:ae(["px-3 py-1.5 rounded-lg border text-xs font-medium transition-colors",a.key==="all"&&V.value===""&&D.value===""||a.key==="this_month"&&V.value===new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]||a.key==="last_month"&&V.value===new Date(new Date().getFullYear(),new Date().getMonth()-1,1).toISOString().split("T")[0]&&D.value===new Date(new Date().getFullYear(),new Date().getMonth(),0).toISOString().split("T")[0]||a.key==="last_3_months"&&V.value===new Date(new Date().getFullYear(),new Date().getMonth()-2,1).toISOString().split("T")[0]?"border-primary-500 bg-primary-50 text-primary-700":"border-surface-200 bg-white text-surface-600 hover:bg-surface-50"]),onClick:L=>he(a.key)},p(a.label),11,Mt)),64))])]),e("div",null,[t[30]||(t[30]=e("p",{class:"text-xs font-medium text-surface-500 uppercase tracking-wide mb-2"},"Custom Range (optional)",-1)),e("div",Dt,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-xs text-surface-500 mb-1"},"From",-1)),s(O,{modelValue:V.value,"onUpdate:modelValue":t[7]||(t[7]=a=>V.value=a),type:"date"},null,8,["modelValue"])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-xs text-surface-500 mb-1"},"To",-1)),s(O,{modelValue:D.value,"onUpdate:modelValue":t[8]||(t[8]=a=>D.value=a),type:"date"},null,8,["modelValue"])])])]),t[31]||(t[31]=e("p",{class:"text-xs text-surface-400"}," Leave blank to export all transactions. ",-1))]),e("div",$t,[s(P,{variant:"ghost",onClick:t[9]||(t[9]=a=>n.value=!1)},{default:m(()=>[...t[32]||(t[32]=[_("Cancel",-1)])]),_:1}),s(P,{variant:"primary",loading:i.value,onClick:xe},{default:m(()=>[...t[33]||(t[33]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),_(" Download CSV ",-1)])]),_:1},8,["loading"])])]),_:1})):Z("",!0),U.value?(l(),q(Ge,{key:1,"edit-target":H.value,onClose:t[11]||(t[11]=a=>U.value=!1),onSaved:K},null,8,["edit-target"])):Z("",!0)]),_:1}))}});export{zt as default};
