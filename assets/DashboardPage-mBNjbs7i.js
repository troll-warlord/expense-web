import{d as ye,k as n,c as l,y as k,b as t,z as Ce,A as Se,B as Ne,C as G,w as Z,i as Le,j as M,F as b,r as y,f as i,t as o,x as w,m as c,s as O,R as ge,n as ee,D as I,E as h}from"./index-BYtlHEAg.js";import{t as E,_ as Be}from"./AppEmptyState.vue_vue_type_script_setup_true_lang-BrLKb1Df.js";import{u as Oe}from"./budgets-B8aD8xRY.js";import{_ as Ie}from"./AppShell.vue_vue_type_script_setup_true_lang-CLwHBfE0.js";import{_ as m}from"./AppSkeleton.vue_vue_type_script_setup_true_lang-Dnr6u1Oa.js";import{e as be,f,a as Ee}from"./index-DGW2OPUm.js";const Re=ye({__name:"AppSpinner",props:{size:{default:"md"}},setup(te){const R={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return(v,F)=>(n(),l("svg",{class:k(["animate-spin text-primary-600",R[te.size]]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[...F[0]||(F[0]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])],2))}}),$e={key:0,class:"space-y-6 animate-pulse"},je={class:"flex flex-wrap gap-1.5"},ze={class:"grid grid-cols-2 lg:grid-cols-4 gap-4"},Pe={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},Ae={class:"grid grid-cols-2 lg:grid-cols-4 gap-4"},Ve={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},We={class:"md:col-span-2 bg-white rounded-xl border border-surface-100 p-5 shadow-sm space-y-3"},Je={class:"bg-white rounded-xl border border-surface-100 p-5 shadow-sm space-y-3"},Ge={class:"bg-white rounded-xl border border-surface-100 p-5 shadow-sm"},Ue={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},qe={class:"bg-white rounded-xl border border-surface-100 shadow-sm"},He={class:"px-5 py-4 border-b border-surface-100"},Ke={class:"divide-y divide-surface-50"},Qe={class:"flex-1 space-y-2"},Xe={key:1,class:"space-y-6"},Ze={class:"flex flex-wrap gap-1.5"},et=["onClick"],tt={class:"grid grid-cols-2 lg:grid-cols-4 gap-4"},st={class:"bg-white rounded-xl border border-surface-100 p-5 space-y-1 shadow-sm"},at={class:"text-xs font-medium text-surface-500 uppercase tracking-wide"},ot={class:"normal-case font-normal text-surface-400"},nt={class:"text-2xl font-bold text-income"},rt={class:"bg-white rounded-xl border border-surface-100 p-5 space-y-1 shadow-sm"},lt={class:"text-xs font-medium text-surface-500 uppercase tracking-wide"},it={class:"normal-case font-normal text-surface-400"},ct={class:"text-2xl font-bold text-expense"},dt={class:"bg-white rounded-xl border border-surface-100 p-5 space-y-1 shadow-sm"},ut={class:"text-xs font-medium text-surface-500 uppercase tracking-wide"},mt={class:"normal-case font-normal text-surface-400"},pt={class:"bg-white rounded-xl border border-surface-100 p-5 space-y-1 shadow-sm"},ht={class:"text-xs font-medium text-surface-500 uppercase tracking-wide"},ft={class:"normal-case font-normal text-surface-400"},xt={key:0,class:"bg-white rounded-xl border border-surface-100 shadow-sm p-5"},gt={class:"flex items-center justify-between mb-4"},bt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},yt={class:"flex items-center justify-between text-xs"},vt={class:"font-medium text-surface-800 truncate max-w-[60%]"},_t={class:"flex justify-between text-[10px] text-surface-400"},wt={key:2,class:"relative"},kt={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-white/60 rounded-xl backdrop-blur-[2px]"},Dt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},Mt={class:"bg-white rounded-xl border border-surface-100 p-5 shadow-sm"},Ft={class:"text-xs text-surface-400 mb-4"},Yt={key:1,class:"flex items-center justify-center h-48 text-surface-400 text-sm"},Tt={class:"bg-white rounded-xl border border-surface-100 p-5 shadow-sm"},Ct={class:"text-xs text-surface-400 mb-4"},St={class:"bg-white rounded-xl border border-surface-100 p-5 shadow-sm"},Nt={class:"text-xs text-surface-400 mb-4"},Lt={key:1,class:"flex items-center justify-center h-48 text-surface-400 text-sm"},Bt={class:"mt-6 grid grid-cols-2 lg:grid-cols-4 gap-4"},Ot={class:"bg-white rounded-xl border border-surface-100 p-4 shadow-sm"},It={class:"text-xl font-bold text-surface-900"},Et={class:"text-xs text-surface-400 mt-0.5"},Rt={class:"bg-white rounded-xl border border-surface-100 p-4 shadow-sm"},$t={class:"text-xl font-bold text-surface-900"},jt={class:"text-xs text-surface-400 mt-0.5"},zt={class:"bg-white rounded-xl border border-surface-100 p-4 shadow-sm"},Pt={class:"text-xl font-bold text-expense"},At={class:"bg-white rounded-xl border border-surface-100 p-4 shadow-sm"},Vt={class:"text-xl font-bold text-surface-900 truncate"},Wt={class:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6"},Jt={class:"md:col-span-2 bg-white rounded-xl border border-surface-100 p-5 shadow-sm"},Gt={class:"text-xs text-surface-400 mb-4"},Ut={class:"bg-white rounded-xl border border-surface-100 p-5 shadow-sm"},qt={class:"bg-white rounded-xl border border-surface-100 p-5 shadow-sm"},Ht={class:"flex items-center justify-between mb-5"},Kt={class:"text-xs text-surface-400"},Qt={class:"grid grid-cols-1 lg:grid-cols-2 gap-x-10 gap-y-6"},Xt={key:0,class:"text-sm text-surface-400 py-4 text-center"},Zt={key:1,class:"space-y-3"},es={class:"flex items-center justify-between text-xs"},ts={class:"font-medium text-surface-800 truncate max-w-[60%]"},ss={class:"text-surface-500 shrink-0"},as={class:"text-surface-400 ml-1"},os={class:"w-full h-1.5 bg-surface-100 rounded-full overflow-hidden"},ns={key:0,class:"text-sm text-surface-400 py-4 text-center"},rs={key:1,class:"space-y-3"},ls={class:"flex items-center justify-between text-xs"},is={class:"font-medium text-surface-800 truncate max-w-[60%]"},cs={class:"text-surface-500 shrink-0"},ds={class:"text-surface-400 ml-1"},us={class:"w-full h-1.5 bg-surface-100 rounded-full overflow-hidden"},ms={class:"bg-white rounded-xl border border-surface-100 shadow-sm"},ps={class:"px-5 py-4 border-b border-surface-100 flex items-center justify-between"},hs={key:0,class:"px-5 py-10 text-center text-sm text-surface-400"},fs={key:1,class:"divide-y divide-surface-50"},xs={class:"flex-1 min-w-0"},gs={class:"text-sm font-medium text-surface-900 truncate"},bs={class:"text-xs text-surface-400"},Ms=ye({__name:"DashboardPage",setup(te){const R=Le(),v=Ce(),F=Oe(),se=[{key:"this_month",label:"This Month",shortLabel:"This Mo."},{key:"last_month",label:"Last Month",shortLabel:"Last Mo."},{key:"3_months",label:"Last 3 Months",shortLabel:"3 Mo."},{key:"6_months",label:"Last 6 Months",shortLabel:"6 Mo."},{key:"this_year",label:"This Year",shortLabel:"YTD"},{key:"this_fy",label:"This FY",shortLabel:"This FY"},{key:"last_fy",label:"Last FY",shortLabel:"Last FY"}],Y=M("this_month"),_=h(()=>se.find(s=>s.key===Y.value)?.label??"");function d(s){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function ae(s){const e=new Date,a=d(e);switch(s){case"this_month":return{from:d(new Date(e.getFullYear(),e.getMonth(),1)),to:a};case"last_month":{const r=new Date(e.getFullYear(),e.getMonth()-1,1),p=new Date(e.getFullYear(),e.getMonth(),0);return{from:d(r),to:d(p)}}case"3_months":return{from:d(new Date(e.getFullYear(),e.getMonth()-2,1)),to:a};case"6_months":return{from:d(new Date(e.getFullYear(),e.getMonth()-5,1)),to:a};case"this_year":return{from:`${e.getFullYear()}-01-01`,to:a};case"this_fy":{const r=e.getMonth()>=3?e.getFullYear():e.getFullYear()-1;return{from:d(new Date(r,3,1)),to:a}}case"last_fy":{const r=(e.getMonth()>=3?e.getFullYear():e.getFullYear()-1)-1;return{from:d(new Date(r,3,1)),to:d(new Date(r+1,2,31))}}}}function ve(s,e){const a=[],r=new Date(e+"T00:00:00");let p=new Date(s+"T00:00:00");for(p=new Date(p.getFullYear(),p.getMonth(),1);p<=r;){const u=new Date(p.getFullYear(),p.getMonth(),1),g=new Date(p.getFullYear(),p.getMonth()+1,0);a.push({from:d(u<new Date(s+"T00:00:00")?new Date(s+"T00:00:00"):u),to:d(g>r?r:g),label:p.toLocaleString("en-IN",{month:"short",year:"2-digit"})}),p=new Date(p.getFullYear(),p.getMonth()+1,1)}return a}const U=M(!0),$=M(!1),D=M(null),j=M(null),L=M([]),q=M([]),z=M({months:[],income:[],expense:[]}),T=h(()=>D.value?.total_income??0),C=h(()=>D.value?.total_expense??0),P=h(()=>D.value?.net??0),B=h(()=>T.value>0?Math.round((T.value-C.value)/T.value*100):null);function H(s,e){return e===0?null:Math.round((s-e)/e*100)}const A=h(()=>H(T.value,j.value?.total_income??0)),V=h(()=>H(C.value,j.value?.total_expense??0)),W=h(()=>H(P.value,j.value?.net??0));function _e(s){const e=new Date;switch(s){case"this_month":{const a=new Date(e.getFullYear(),e.getMonth()-1,1),r=new Date(e.getFullYear(),e.getMonth(),0);return{from:d(a),to:d(r)}}case"last_month":{const a=new Date(e.getFullYear(),e.getMonth()-2,1),r=new Date(e.getFullYear(),e.getMonth()-1,0);return{from:d(a),to:d(r)}}case"3_months":return{from:d(new Date(e.getFullYear(),e.getMonth()-5,1)),to:d(new Date(e.getFullYear(),e.getMonth()-3,0))};case"6_months":return{from:d(new Date(e.getFullYear(),e.getMonth()-11,1)),to:d(new Date(e.getFullYear(),e.getMonth()-6,0))};case"this_year":return{from:`${e.getFullYear()-1}-01-01`,to:`${e.getFullYear()-1}-12-31`};case"this_fy":{const a=(e.getMonth()>=3?e.getFullYear():e.getFullYear()-1)-1;return{from:d(new Date(a,3,1)),to:d(new Date(a+1,2,31))}}case"last_fy":{const a=(e.getMonth()>=3?e.getFullYear():e.getFullYear()-1)-2;return{from:d(new Date(a,3,1)),to:d(new Date(a+1,2,31))}}}}const oe=h(()=>(D.value?.category_breakdown??[]).filter(s=>s.type==="expense").sort((s,e)=>e.total-s.total).slice(0,5).map(s=>({name:s.name,amount:s.total,pct:C.value>0?s.total/C.value*100:0}))),ne=h(()=>(D.value?.category_breakdown??[]).filter(s=>s.type==="income").sort((s,e)=>e.total-s.total).slice(0,5).map(s=>({name:s.name,amount:s.total,pct:T.value>0?s.total/T.value*100:0}))),re=h(()=>{const{from:s,to:e}=ae(Y.value);return Math.ceil((new Date(e+"T00:00:00").getTime()-new Date(s+"T00:00:00").getTime())/864e5)+1}),we=h(()=>C.value>0?C.value/re.value:0),le=h(()=>L.value.filter(s=>v.getCategoryById(s.category_id)?.type==="expense").reduce((s,e)=>e.amount>s?e.amount:s,0)),ke=h(()=>D.value?.transaction_count??0),De=h(()=>(D.value?.category_breakdown??[]).filter(s=>s.type==="expense").sort((s,e)=>e.total-s.total)[0]?.name??"—"),J=h(()=>{const s={},e={};for(const u of L.value){const g=u.date.split("T")[0]??"";if(!g)continue;const S=v.getCategoryById(u.category_id)?.type;S==="expense"&&(s[g]=(s[g]??0)+u.amount),S==="income"&&(e[g]=(e[g]??0)+u.amount)}const a=[...new Set([...Object.keys(s),...Object.keys(e)])].sort(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=u=>{const[,g="1",S=""]=u.split("-");return`${S} ${r[Number(g)-1]??""}`};return{labels:a.map(p),income:a.map(u=>e[u]??0),expense:a.map(u=>s[u]??0)}}),ie=h(()=>({chart:{type:"area",height:260,toolbar:{show:!1},zoom:{enabled:!1}},series:[{name:"Income",data:J.value.income},{name:"Expense",data:J.value.expense}],xaxis:{categories:J.value.labels,tickAmount:Math.min(J.value.labels.length,10),labels:{rotate:-35,style:{fontSize:"11px"}}},yaxis:{labels:{formatter:s=>f(s)}},colors:["#10b981","#ef4444"],stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{opacityFrom:.35,opacityTo:.05}},dataLabels:{enabled:!1},legend:{position:"top"},tooltip:{y:{formatter:s=>f(s)}}})),Me=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ce=h(()=>{const s=[0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0];for(const r of L.value)if(v.getCategoryById(r.category_id)?.type==="expense"){const u=new Date(r.date.split("T")[0]+"T00:00:00").getDay();s[u]=(s[u]??0)+r.amount,e[u]=(e[u]??0)+1}const a=s.map((r,p)=>{const u=e[p]??0;return u>0?Math.round(r/u):0});return{chart:{type:"bar",height:260,toolbar:{show:!1}},series:[{name:"Avg Spend",data:a}],xaxis:{categories:Me},yaxis:{labels:{formatter:r=>f(r)}},colors:["#f59e0b"],dataLabels:{enabled:!1},plotOptions:{bar:{borderRadius:4,columnWidth:"55%"}},legend:{show:!1},tooltip:{y:{formatter:r=>f(r)}}}}),Fe=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16"],Ye=["#8b5cf6","#06b6d4","#f97316","#84cc16","#3b82f6","#10b981","#f59e0b","#ef4444"],K=h(()=>{const s=(D.value?.category_breakdown??[]).filter(e=>e.type==="expense");return{labels:s.map(e=>e.name),series:s.map(e=>e.total),chart:{type:"donut",height:300,toolbar:{show:!1}},legend:{position:"bottom"},dataLabels:{enabled:!1},plotOptions:{pie:{donut:{size:"65%"}}},colors:Fe,tooltip:{y:{formatter:e=>f(e)}}}}),Q=h(()=>{const s={};for(const e of L.value)if(v.getCategoryById(e.category_id)?.type==="expense"){const r=v.getPaymentMethodById(e.payment_method_id)?.name??"Unknown";s[r]=(s[r]||0)+e.amount}return{labels:Object.keys(s),series:Object.values(s),chart:{type:"donut",height:300,toolbar:{show:!1}},legend:{position:"bottom"},dataLabels:{enabled:!1},plotOptions:{pie:{donut:{size:"65%"}}},colors:Ye,tooltip:{y:{formatter:e=>f(e)}}}}),de=h(()=>({chart:{type:"bar",height:280,toolbar:{show:!1}},series:[{name:"Income",data:z.value.income,color:"#10b981"},{name:"Expense",data:z.value.expense,color:"#ef4444"}],xaxis:{categories:z.value.months},yaxis:{labels:{formatter:s=>f(s,"INR","en-IN").replace("₹","₹")}},dataLabels:{enabled:!1},plotOptions:{bar:{columnWidth:"60%",borderRadius:4}},legend:{position:"top"},tooltip:{y:{formatter:s=>f(s)}}}));function ue(s){return{...s,amount:Number(s.amount)}}async function me(){$.value=!0;try{const{from:s,to:e}=ae(Y.value),a=ve(s,e),{from:r,to:p}=_e(Y.value),[u,g,S,pe]=await Promise.all([Promise.all(a.map(x=>E.summary({date_from:x.from,date_to:x.to}))),E.summary({date_from:s,date_to:e}),E.list({date_from:s,date_to:e,page_size:1e3}),E.summary({date_from:r,date_to:p})]),he=[],fe=[],xe=[];if(a.forEach((x,N)=>{const X=u[N]?.data?.data;X&&(he.push(x.label),fe.push(Number(X.total_income)),xe.push(Number(X.total_expense)))}),z.value={months:he,income:fe,expense:xe},g.data.success){const x=g.data.data;D.value={...x,total_income:Number(x.total_income),total_expense:Number(x.total_expense),net:Number(x.net),category_breakdown:x.category_breakdown.map(N=>({...N,total:Number(N.total)}))}}if(S.data.success&&(L.value=S.data.data.map(ue)),pe.data.success){const x=pe.data.data;j.value={...x,total_income:Number(x.total_income),total_expense:Number(x.total_expense),net:Number(x.net),category_breakdown:x.category_breakdown.map(N=>({...N,total:Number(N.total)}))}}}catch(s){R.error(be(s))}finally{$.value=!1}}async function Te(){U.value=!0;try{const s=await E.list({page:1,page_size:10});s.data.success&&(q.value=s.data.data.map(ue)),await me()}catch(s){R.error(be(s))}finally{U.value=!1}}return Se(Y,me),Ne(()=>{Te(),F.loaded||F.fetchBudgets()}),(s,e)=>(n(),G(Ie,null,{default:Z(()=>[U.value?(n(),l("div",$e,[t("div",je,[(n(),l(b,null,y(7,a=>i(m,{key:a,h:"h-7",w:"w-20",pill:""})),64))]),t("div",ze,[(n(),l(b,null,y(4,a=>t("div",{key:a,class:"bg-white rounded-xl border border-surface-100 p-5 shadow-sm space-y-3"},[i(m,{h:"h-3",w:"w-28"}),i(m,{h:"h-7",w:"w-36"})])),64))]),t("div",Pe,[(n(),l(b,null,y(3,a=>t("div",{key:a,class:"bg-white rounded-xl border border-surface-100 p-5 shadow-sm space-y-3"},[i(m,{h:"h-4",w:"w-40"}),i(m,{h:"h-3",w:"w-28"}),i(m,{h:"h-56"})])),64))]),t("div",Ae,[(n(),l(b,null,y(4,a=>t("div",{key:a,class:"bg-white rounded-xl border border-surface-100 p-4 shadow-sm space-y-2"},[i(m,{h:"h-3",w:"w-24"}),i(m,{h:"h-6",w:"w-32"}),i(m,{h:"h-3",w:"w-20"})])),64))]),t("div",Ve,[t("div",We,[i(m,{h:"h-4",w:"w-40"}),i(m,{h:"h-3",w:"w-28"}),i(m,{h:"h-56"})]),t("div",Je,[i(m,{h:"h-4",w:"w-40"}),i(m,{h:"h-3",w:"w-28"}),i(m,{h:"h-56"})])]),t("div",Ge,[i(m,{h:"h-4",w:"w-40",class:"mb-5"}),t("div",Ue,[(n(),l(b,null,y(2,a=>t("div",{key:a,class:"space-y-3"},[(n(),l(b,null,y(4,r=>t("div",{key:r,class:"flex items-center gap-3"},[i(m,{h:"h-3",w:"w-24"}),i(m,{h:"h-2",class:"flex-1",pill:""}),i(m,{h:"h-3",w:"w-16"})])),64))])),64))])]),t("div",qe,[t("div",He,[i(m,{h:"h-4",w:"w-40"})]),t("div",Ke,[(n(),l(b,null,y(5,a=>t("div",{key:a,class:"px-5 py-3.5 flex items-center gap-4"},[t("div",Qe,[i(m,{h:"h-3.5",w:"w-48"}),i(m,{h:"h-3",w:"w-32"})]),i(m,{h:"h-4",w:"w-20"})])),64))])])])):(n(),l("div",Xe,[t("div",Ze,[(n(),l(b,null,y(se,a=>t("button",{key:a.key,class:k(["px-3 py-1.5 text-xs font-medium rounded-full border transition-colors",Y.value===a.key?"bg-primary-600 text-white border-primary-600 shadow-sm":"bg-white text-surface-600 border-surface-200 hover:border-primary-400 hover:text-primary-600"]),onClick:r=>Y.value=a.key},o(a.label),11,et)),64))]),t("div",tt,[t("div",st,[t("p",at,[e[0]||(e[0]=w(" Total Income ",-1)),t("span",ot,"— "+o(_.value),1)]),t("p",nt,o(c(f)(T.value)),1),A.value!==null?(n(),l("p",{key:0,class:k(["text-xs",A.value>=0?"text-income":"text-expense"])},[w(o(A.value>=0?"↑":"↓")+" "+o(Math.abs(A.value))+"% ",1),e[1]||(e[1]=t("span",{class:"text-surface-400"},"vs prev period",-1))],2)):O("",!0)]),t("div",rt,[t("p",lt,[e[2]||(e[2]=w(" Total Expense ",-1)),t("span",it,"— "+o(_.value),1)]),t("p",ct,o(c(f)(C.value)),1),V.value!==null?(n(),l("p",{key:0,class:k(["text-xs",V.value<=0?"text-income":"text-expense"])},[w(o(V.value>=0?"↑":"↓")+" "+o(Math.abs(V.value))+"% ",1),e[3]||(e[3]=t("span",{class:"text-surface-400"},"vs prev period",-1))],2)):O("",!0)]),t("div",dt,[t("p",ut,[e[4]||(e[4]=w(" Net Balance ",-1)),t("span",mt,"— "+o(_.value),1)]),t("p",{class:k(["text-2xl font-bold",P.value>=0?"text-income":"text-expense"])},o(P.value>=0?"+":"")+o(c(f)(P.value)),3),W.value!==null?(n(),l("p",{key:0,class:k(["text-xs",W.value>=0?"text-income":"text-expense"])},[w(o(W.value>=0?"↑":"↓")+" "+o(Math.abs(W.value))+"% ",1),e[5]||(e[5]=t("span",{class:"text-surface-400"},"vs prev period",-1))],2)):O("",!0)]),t("div",pt,[t("p",ht,[e[6]||(e[6]=w(" Savings Rate ",-1)),t("span",ft,"— "+o(_.value),1)]),t("p",{class:k(["text-2xl font-bold",B.value===null?"text-surface-400":B.value>=20?"text-income":B.value>=0?"text-amber-500":"text-expense"])},o(B.value===null?"—":`${B.value}%`),3)])]),c(F).budgets.length>0?(n(),l("div",xt,[t("div",gt,[e[8]||(e[8]=t("h2",{class:"text-sm font-semibold text-surface-700"},"Budget Overview",-1)),i(c(ge),{to:"/budgets",class:"text-xs text-primary-600 hover:underline font-medium"},{default:Z(()=>[...e[7]||(e[7]=[w(" Manage budgets ",-1)])]),_:1})]),t("div",bt,[(n(!0),l(b,null,y(c(F).budgets.slice(0,6),a=>(n(),l("div",{key:a.id,class:"space-y-2"},[t("div",yt,[t("span",vt,o(a.category?a.category.name:"Overall"),1),t("span",{class:k(["font-semibold shrink-0",a.percent>=100?"text-red-600":a.percent>=80?"text-yellow-600":"text-emerald-600"])},o(Math.min(a.percent,999).toFixed(0))+"% ",3)]),t("div",{class:k(["relative h-2 rounded-full overflow-hidden",a.percent>=100?"bg-red-100":a.percent>=80?"bg-yellow-100":"bg-emerald-100"])},[t("div",{class:k(["h-full rounded-full transition-all duration-500",a.percent>=100?"bg-red-500":a.percent>=80?"bg-yellow-400":"bg-emerald-500"]),style:ee({width:`${Math.min(a.percent,100)}%`})},null,6)],2),t("div",_t,[t("span",null,o(c(f)(a.spent))+" spent",1),t("span",null,"of "+o(c(f)(a.amount)),1)])]))),128))])])):O("",!0),!$.value&&D.value?.transaction_count===0?(n(),G(Be,{key:1,title:"No transactions for this period",description:`There are no transactions recorded for ${_.value}. Add some to see your spending breakdown.`},null,8,["description"])):(n(),l("div",wt,[$.value?(n(),l("div",kt,[i(Re,{size:"lg"})])):O("",!0),t("div",Dt,[t("div",Mt,[e[9]||(e[9]=t("h2",{class:"text-sm font-semibold text-surface-700 mb-1"},"Expense by Category",-1)),t("p",Ft,o(_.value),1),K.value.series.length>0?(n(),G(c(I),{key:0,type:"donut",height:"300",options:K.value,series:K.value.series},null,8,["options","series"])):(n(),l("div",Yt," No expense data for this period "))]),t("div",Tt,[e[10]||(e[10]=t("h2",{class:"text-sm font-semibold text-surface-700 mb-1"},"Income vs Expense",-1)),t("p",Ct,o(_.value)+" · monthly breakdown ",1),i(c(I),{type:"bar",height:"280",options:de.value,series:de.value.series},null,8,["options","series"])]),t("div",St,[e[11]||(e[11]=t("h2",{class:"text-sm font-semibold text-surface-700 mb-1"},"Expense by Payment Method",-1)),t("p",Nt,o(_.value),1),Q.value.series.length>0?(n(),G(c(I),{key:0,type:"donut",height:"300",options:Q.value,series:Q.value.series},null,8,["options","series"])):(n(),l("div",Lt," No expense data for this period "))])]),t("div",Bt,[t("div",Ot,[e[12]||(e[12]=t("p",{class:"text-[11px] font-medium text-surface-500 uppercase tracking-wide mb-1"},"Avg Daily Spend",-1)),t("p",It,o(c(f)(we.value)),1),t("p",Et,"over "+o(re.value)+" days",1)]),t("div",Rt,[e[13]||(e[13]=t("p",{class:"text-[11px] font-medium text-surface-500 uppercase tracking-wide mb-1"},"Transactions",-1)),t("p",$t,o(ke.value),1),t("p",jt,o(_.value),1)]),t("div",zt,[e[14]||(e[14]=t("p",{class:"text-[11px] font-medium text-surface-500 uppercase tracking-wide mb-1"},"Biggest Expense",-1)),t("p",Pt,o(le.value>0?c(f)(le.value):"—"),1),e[15]||(e[15]=t("p",{class:"text-xs text-surface-400 mt-0.5"},"single transaction",-1))]),t("div",At,[e[16]||(e[16]=t("p",{class:"text-[11px] font-medium text-surface-500 uppercase tracking-wide mb-1"},"Top Expense",-1)),t("p",Vt,o(De.value),1),e[17]||(e[17]=t("p",{class:"text-xs text-surface-400 mt-0.5"},"by category",-1))])]),t("div",Wt,[t("div",Jt,[e[18]||(e[18]=t("h2",{class:"text-sm font-semibold text-surface-700 mb-1"},"Daily Cashflow",-1)),t("p",Gt,o(_.value)+" · income vs expense per day",1),i(c(I),{type:"area",height:"260",options:ie.value,series:ie.value.series},null,8,["options","series"])]),t("div",Ut,[e[19]||(e[19]=t("h2",{class:"text-sm font-semibold text-surface-700 mb-1"},"Spending by Day",-1)),e[20]||(e[20]=t("p",{class:"text-xs text-surface-400 mb-4"},"avg expense per weekday",-1)),i(c(I),{type:"bar",height:"260",options:ce.value,series:ce.value.series},null,8,["options","series"])])])])),t("div",qt,[t("div",Ht,[e[21]||(e[21]=t("h2",{class:"text-sm font-semibold text-surface-700"},"Top Categories",-1)),t("span",Kt,o(_.value),1)]),t("div",Qt,[t("div",null,[e[22]||(e[22]=t("p",{class:"text-xs font-medium text-surface-500 uppercase tracking-wide mb-3"},"Expense",-1)),oe.value.length===0?(n(),l("div",Xt," No expense data ")):(n(),l("ul",Zt,[(n(!0),l(b,null,y(oe.value,a=>(n(),l("li",{key:a.name,class:"space-y-1"},[t("div",es,[t("span",ts,o(a.name),1),t("span",ss,[w(o(c(f)(a.amount))+" ",1),t("span",as,o(Math.round(a.pct))+"%",1)])]),t("div",os,[t("div",{class:"h-1.5 bg-expense rounded-full transition-all duration-500",style:ee({width:`${a.pct}%`})},null,4)])]))),128))]))]),t("div",null,[e[23]||(e[23]=t("p",{class:"text-xs font-medium text-surface-500 uppercase tracking-wide mb-3"},"Income",-1)),ne.value.length===0?(n(),l("div",ns," No income data ")):(n(),l("ul",rs,[(n(!0),l(b,null,y(ne.value,a=>(n(),l("li",{key:a.name,class:"space-y-1"},[t("div",ls,[t("span",is,o(a.name),1),t("span",cs,[w(o(c(f)(a.amount))+" ",1),t("span",ds,o(Math.round(a.pct))+"%",1)])]),t("div",us,[t("div",{class:"h-1.5 bg-income rounded-full transition-all duration-500",style:ee({width:`${a.pct}%`})},null,4)])]))),128))]))])])]),t("div",ms,[t("div",ps,[e[25]||(e[25]=t("h2",{class:"text-sm font-semibold text-surface-700"},"Recent Transactions",-1)),i(c(ge),{to:"/transactions",class:"text-xs text-primary-600 hover:underline font-medium"},{default:Z(()=>[...e[24]||(e[24]=[w(" View all ",-1)])]),_:1})]),q.value.length===0?(n(),l("div",hs," No transactions yet. ")):(n(),l("ul",fs,[(n(!0),l(b,null,y(q.value,a=>(n(),l("li",{key:a.id,class:"flex items-center gap-4 px-5 py-3"},[t("div",xs,[t("p",gs,o(a.description||c(v).getCategoryById(a.category_id)?.name),1),t("p",bs,o(c(Ee)(a.date))+" · "+o(c(v).getCategoryById(a.category_id)?.name)+" · "+o(c(v).getPaymentMethodById(a.payment_method_id)?.name),1)]),t("span",{class:k(["text-sm font-semibold shrink-0",c(v).getCategoryById(a.category_id)?.type==="income"?"text-income":"text-expense"])},o(c(v).getCategoryById(a.category_id)?.type==="income"?"+":"-")+o(c(f)(a.amount)),3)]))),128))]))])]))]),_:1}))}});export{Ms as default};
